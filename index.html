<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jukebox Controller</title>
    <style>
        body { font-family: 'Helvetica Neue', sans-serif; text-align: center; padding: 20px; background-color: #121212; color: white; }
        .view-section { display: none; max-width: 500px; margin: 0 auto; }
        .active { display: block; }
        
        input { width: 90%; padding: 15px; margin: 10px 0; border-radius: 5px; border: none; font-size: 16px; }
        .btn { background-color: #1DB954; color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 18px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 20px; }
        
        .song-btn { display: block; width: 100%; padding: 20px; margin: 10px 0; background: #333; color: white; border: 1px solid #444; border-radius: 10px; font-size: 18px; cursor: pointer; text-align: left; }
        .song-btn:active { background: #1DB954; }
        .song-sub { font-size: 12px; color: #aaa; display: block; margin-top: 5px;}
    </style>
</head>
<body>

    <div id="landing-view" class="view-section active">
        <h1>Welcome</h1>
        <p>Enter details to request a song.</p>
        <form id="marketing-form">
            <input type="text" id="name" placeholder="Name" required>
            <input type="email" id="email" placeholder="Email" required>
            <input type="text" id="postcode" placeholder="Postcode" required>
            <button type="submit" class="btn">Continue</button>
        </form>
    </div>

    <div id="song-view" class="view-section">
        <h1>Pick a Song</h1>
        <p>Testing with reliable audio files.</p>
        
        <button class="song-btn" onclick="requestSong('Test Beep 1', 'https://www.soundjay.com/buttons/sounds/button-3.mp3')">
            ðŸŽµ Test Sound 1 (Beep)
            <span class="song-sub">Verify Audio Works</span>
        </button>

        <button class="song-btn" onclick="requestSong('Test Beep 2', 'https://www.soundjay.com/buttons/sounds/button-09a.mp3')">
            ðŸŽµ Test Sound 2 (Click)
            <span class="song-sub">Verify Audio Works</span>
        </button>
    </div>

    <div id="thank-you-view" class="view-section">
        <h1>Added to Queue!</h1>
        <p>Look at the Host screen.</p>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        document.getElementById('marketing-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const data = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                postcode: document.getElementById('postcode').value
            };
            socket.emit('submitUserData', data);
        });

        socket.on('registrationSuccess', () => {
            document.getElementById('landing-view').classList.remove('active');
            document.getElementById('song-view').classList.add('active');
        });

        function requestSong(title, url) {
            const song = { title: title, url: url, requester: document.getElementById('name').value };
            socket.emit('requestSong', song);
            document.getElementById('song-view').classList.remove('active');
            document.getElementById('thank-you-view').classList.add('active');
        }
    </script>
</body>
</html>
